# 🚀 AI Complaint Management System
## Система управления жалобами с искусственным интеллектом

---

## 📋 Содержание

1. [Обзор проекта](#обзор-проекта)
2. [Технологический стек](#технологический-стек)
3. [Архитектура](#архитектура)
4. [Ключевые возможности](#ключевые-возможности)
5. [Демонстрация](#демонстрация)

---

## 🎯 Обзор проекта

### Проблема
- Жители не знают, куда обращаться с жалобами на общественный транспорт
- Администраторы тонут в потоке неструктурированных жалоб
- Нет автоматической приоритизации и анализа

### Решение
**AI-агент**, который:
- ✅ Принимает жалобы в любом формате (текст, голос, фото)
- ✅ Автоматически анализирует и структурирует данные
- ✅ Определяет приоритет и извлекает ключевую информацию
- ✅ Предоставляет рекомендации на казахском языке
- ✅ Визуализирует данные для администраторов

---

## 💻 Технологический стек

### Backend (Java/Spring)

#### 🍃 **Spring Boot 3.5.7**
- Современный Java-фреймворк для enterprise-приложений
- Быстрая разработка с auto-configuration
- Production-ready метрики и health checks

#### 🔐 **Spring Security 6.5.6**
- Аутентификация и авторизация
- Ролевая модель (ROLE_USER, ROLE_ADMIN)
- Session-based authentication
- BCrypt для хеширования паролей
- CORS настройки для безопасности

#### 🗄️ **Spring Data JPA**
- ORM для работы с базой данных
- Автоматическая генерация запросов
- Поддержка сложных типов (UUID, массивы)
- Hibernate 6.6.33.Final под капотом

#### 📦 **PostgreSQL Driver 42.7.8**
- Надёжный драйвер для PostgreSQL
- Оптимизированные настройки соединения
- Поддержка всех типов данных PostgreSQL

#### 🛠️ **Lombok 1.18.40**
- Уменьшение boilerplate кода
- @Data, @Builder, @Slf4j аннотации
- Автоматическая генерация getters/setters

#### 🔄 **RestTemplate**
- HTTP-клиент для интеграции с n8n webhooks
- Поддержка multipart/form-data для файлов
- Обработка JSON-ответов

---

### Frontend (Vue.js)

#### 🖼️ **Vue 3 (Composition API)**
- Современный реактивный фреймворк
- Composition API для переиспользуемой логики
- TypeScript-ready
- Отличная производительность

#### ⚡ **Vite 5.4.21**
- Сверхбыстрый build tool
- Hot Module Replacement (HMR)
- Оптимизированная production-сборка
- ES modules из коробки

#### 📊 **Chart.js**
- Интерактивные графики
- Bar charts для маршрутов и участников
- Адаптивный дизайн
- Анимации и transitions

#### 🗺️ **Leaflet**
- Open-source карты
- Интерактивный выбор местоположения
- Маркеры для жалоб
- Легковесная библиотека

#### 🎨 **Axios**
- HTTP-клиент для API-запросов
- Interceptors для обработки ошибок
- Поддержка multipart для файлов
- Promise-based API

#### 🔄 **Pinia (опционально)**
- State management для Vue 3
- Простой и типизированный
- DevTools интеграция

---

### Database

#### 🐘 **PostgreSQL 16**
- Надёжная реляционная СУБД
- Поддержка JSON, массивов, UUID
- ACID транзакции
- Мощные индексы для быстрого поиска

#### 📊 **Структура данных**
```sql
- users (id, username, email, password, roles)
- complaints (id, raw_text, route, place, actor, 
             aspect[], priority, confidence, 
             lat, lng, user_id, status)
```

---

### DevOps & Deployment

#### 🐳 **Docker & Docker Compose**
- Контейнеризация всех сервисов
- Изолированная среда выполнения
- Одна команда для запуска: `docker-compose up`
- Health checks для мониторинга

#### 🔧 **Maven 3.9.11**
- Управление зависимостями
- Multi-stage Docker build
- Плагины для сборки и тестирования

#### 🌐 **Nginx**
- Reverse proxy для frontend
- Проксирование API-запросов к backend
- Статическая раздача файлов
- Gzip compression

---

### AI Integration

#### 🤖 **n8n Workflows**
- Low-code автоматизация
- Webhooks для обработки жалоб
- Интеграция с AI-моделями
- Поддержка мультимодальности:
  - Текст → NLP анализ
  - Голос → Speech-to-Text → NLP
  - Фото → Vision API → описание

#### 🧠 **AI Capabilities**
- Извлечение сущностей (маршрут, место, время, участник)
- Определение приоритета (критический, высокий, средний, низкий)
- Классификация аспектов (безопасность, комфорт, сервис)
- Генерация рекомендаций на казахском языке
- Оценка уверенности (confidence score)

---

## 🏗️ Архитектура

```
┌─────────────────────────────────────────────────────────┐
│                     FRONTEND (Vue 3)                     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │   Resident   │  │    Admin     │  │   AI Chat    │  │
│  │     UI       │  │  Dashboard   │  │   Component  │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
│         │                  │                  │          │
│         └──────────────────┴──────────────────┘          │
│                          │                                │
│                     Axios HTTP                            │
│                          │                                │
└──────────────────────────┼────────────────────────────────┘
                           │
                    Nginx Reverse Proxy
                           │
┌──────────────────────────┼────────────────────────────────┐
│                     BACKEND (Spring Boot)                 │
│  ┌──────────────────────────────────────────────────┐    │
│  │            REST API Controllers                   │    │
│  │  /api/complaints, /api/auth, /api/users         │    │
│  └──────────────────────────────────────────────────┘    │
│         │                                    │             │
│  ┌──────▼──────┐                    ┌───────▼──────┐     │
│  │   Service   │                    │   Security   │     │
│  │    Layer    │                    │    Config    │     │
│  └──────┬──────┘                    └──────────────┘     │
│         │                                                  │
│  ┌──────▼──────────────────┐      ┌──────────────┐      │
│  │   JPA Repositories      │      │ RestTemplate │      │
│  └──────┬──────────────────┘      └──────┬───────┘      │
│         │                                 │               │
└─────────┼─────────────────────────────────┼───────────────┘
          │                                 │
   ┌──────▼──────┐                  ┌──────▼──────┐
   │ PostgreSQL  │                  │ n8n Webhook │
   │  Database   │                  │  (AI Agent) │
   └─────────────┘                  └─────────────┘
```

---

## ✨ Ключевые возможности

### Для жителей 👥

#### 📝 Мультимодальная отправка жалоб
- **Текст**: Свободная форма на русском/казахском
- **Голос**: Запись до 60 секунд с таймером
- **Фото**: С возможностью добавить описание
- **Геолокация**: Выбор точки на интерактивной карте

#### 🤖 AI-анализ в реальном времени
- Автоматическое извлечение:
  - 🚌 Номер маршрута
  - 📍 Место происшествия
  - 🕐 Время
  - 👤 Участники (водитель, кондуктор)
  - 🏷️ Аспекты (безопасность, комфорт, сервис)
- ⚡ Определение приоритета
- 💡 Рекомендации на казахском языке

#### 📊 Отслеживание статуса
- Просмотр всех своих жалоб
- Группировка похожих жалоб
- Статус обработки (NEW, IN_PROGRESS, RESOLVED)

---

### Для администраторов 👨‍💼

#### 📈 Дашборд с аналитикой
- **Общая статистика**:
  - Всего жалоб
  - Средняя уверенность AI
  - Распределение по приоритетам
- **Графики**:
  - Top-10 проблемных маршрутов
  - Проблемные участники
  - Распределение по аспектам

#### 🔍 Фильтрация и поиск
- По маршруту
- По приоритету
- По статусу
- По дате

#### 🗺️ Визуализация на карте
- Просмотр местоположения каждой жалобы
- Кластеризация проблемных зон

#### 🤖 AI-помощник для администратора
- **Общий анализ**: "Какие маршруты имеют больше всего жалоб?"
- **Конкретная жалоба**: "Какие меры предпринять для решения?"
- **Анимация печати**: Естественная скорость с паузами
- **Индикатор "печатает..."**: Визуальная обратная связь
- **Структурированные ответы**: Приоритет, рекомендации, аспекты

---

## 🎨 UI/UX Особенности

### Дизайн-система
- 🎨 **Цветовая палитра**: Фиолетовые градиенты (#667eea → #764ba2)
- 🔤 **Типографика**: System fonts для быстрой загрузки
- 📐 **Layout**: Flexbox + CSS Grid
- 🎭 **Анимации**: CSS transitions + keyframes

### Анимация печати AI
```javascript
// Естественная скорость печати
for (let i = 0; i < text.length; i++) {
  const char = text[i]
  let delay = 15 // базовая скорость
  if (char === ' ') delay = 5 // быстро для пробелов
  else if (['.', '!', '?'].includes(char)) delay = 200 // пауза
  await sleep(delay)
}
```

### Адаптивность
- 📱 Mobile-first подход
- 💻 Breakpoints: 768px, 1024px
- 🖥️ Fluid typography
- 📏 Flexible grids

---

## 🔐 Безопасность

### Аутентификация
- ✅ Session-based authentication
- ✅ BCrypt password hashing (cost factor: 10)
- ✅ CSRF protection
- ✅ Secure cookies (HttpOnly, SameSite)

### Авторизация
- ✅ Ролевая модель (ROLE_USER, ROLE_ADMIN)
- ✅ Method-level security (@PreAuthorize)
- ✅ URL-based access control

### CORS
```java
.cors(cors -> cors
    .configurationSource(request -> {
        var config = new CorsConfiguration();
        config.setAllowedOrigins(List.of("http://localhost:5173"));
        config.setAllowedMethods(List.of("*"));
        config.setAllowCredentials(true);
        return config;
    })
)
```

---

## 🚀 Deployment

### Docker Compose
```yaml
services:
  db:          # PostgreSQL 16
  backend:     # Spring Boot
  frontend:    # Vue 3 + Nginx
```

### Health Checks
- **Database**: `pg_isready` каждые 10 секунд
- **Backend**: `/api/complaints/summary` каждые 30 секунд
- **Frontend**: HTTP check каждые 30 секунд

### Volumes
- `db_data`: Персистентность данных PostgreSQL
- `init.sql`: Автоматическая инициализация схемы

### Networks
- Изолированная Docker-сеть `bdh-network`
- Внутренняя коммуникация между сервисами
- Внешний доступ только через порты

---

## 📊 Производительность

### Метрики
- ⚡ **Время запуска**: 2-3 минуты (первый раз), 30 секунд (повторно)
- 🚀 **Скорость ответа API**: < 100ms
- 📦 **Размер Docker images**:
  - Backend: ~200MB
  - Frontend: ~25MB
  - Database: ~80MB
- 💾 **Использование памяти**: ~1GB (все сервисы)

### Оптимизации
- ✅ Multi-stage Docker builds
- ✅ Vite для быстрой сборки frontend
- ✅ Nginx gzip compression
- ✅ Database индексы на часто используемых полях
- ✅ Connection pooling (HikariCP)

---

## 🧪 Тестирование

### Backend
```bash
mvn test
```
- Unit tests (JUnit 5)
- Integration tests (Spring Boot Test)
- MockMvc для REST API

### Frontend
```bash
npm run test
```
- Component tests (Vitest)
- E2E tests (Cypress, опционально)

---

## 📈 Масштабируемость

### Горизонтальное масштабирование
- ✅ Stateless backend (можно добавить больше инстансов)
- ✅ Load balancer (Nginx) перед backend
- ✅ Database connection pooling

### Вертикальное масштабирование
- ✅ Настраиваемые ресурсы в docker-compose
- ✅ JVM heap size через `JAVA_OPTS`
- ✅ PostgreSQL tuning параметры

---

## 🔮 Будущие улучшения

### Технические
- 🔄 Kubernetes для оркестрации
- 📊 Prometheus + Grafana для мониторинга
- 🔍 Elasticsearch для полнотекстового поиска
- 💾 Redis для кэширования
- 🔐 OAuth2/JWT для аутентификации

### Функциональные
- 📧 Email уведомления
- 📱 Mobile приложение (React Native)
- 🌐 Мультиязычность (i18n)
- 📊 Расширенная аналитика (ML predictions)
- 🔔 Real-time уведомления (WebSockets)

---

## 📚 Технологии в цифрах

| Категория | Технология | Версия | Назначение |
|-----------|-----------|--------|------------|
| **Backend** | Spring Boot | 3.5.7 | Framework |
| | Spring Security | 6.5.6 | Безопасность |
| | Hibernate | 6.6.33 | ORM |
| | PostgreSQL Driver | 42.7.8 | JDBC |
| | Lombok | 1.18.40 | Boilerplate |
| **Frontend** | Vue | 3.x | UI Framework |
| | Vite | 5.4.21 | Build Tool |
| | Chart.js | Latest | Графики |
| | Leaflet | Latest | Карты |
| | Axios | Latest | HTTP Client |
| **Database** | PostgreSQL | 16 | СУБД |
| **DevOps** | Docker | Latest | Контейнеры |
| | Docker Compose | 3.9 | Оркестрация |
| | Nginx | Alpine | Web Server |
| **AI** | n8n | Latest | Automation |

---

## 🎯 Ключевые преимущества

### 1. **Простота развёртывания** 🚀
```bash
./start.sh  # Одна команда!
```

### 2. **Современный стек** 💻
- Последние версии всех технологий
- Best practices и паттерны
- Production-ready код

### 3. **Масштабируемость** 📈
- Микросервисная архитектура (готовность)
- Контейнеризация
- Stateless design

### 4. **Безопасность** 🔐
- Enterprise-level security
- Ролевая модель
- Защита данных

### 5. **UX/UI** 🎨
- Современный дизайн
- Плавные анимации
- Адаптивность

### 6. **AI-интеграция** 🤖
- Мультимодальность
- Структурированные данные
- Рекомендации

---

## 💡 Инновации

### 1. **Анимация печати с паузами**
Естественная имитация человеческой печати с паузами на знаках препинания

### 2. **Мультимодальный ввод**
Текст + Голос + Фото + Геолокация в одном интерфейсе

### 3. **Группировка жалоб**
Автоматическое определение похожих жалоб на frontend

### 4. **Контекстный AI-чат**
Разные режимы для жителей и администраторов

### 5. **One-command deployment**
Весь стек запускается одной командой

---

## 📞 Контакты и ресурсы

### Документация
- 📖 `README.md` - Полная документация
- 🚀 `QUICKSTART.md` - Быстрый старт
- 🎬 `DEMO.md` - Сценарий демонстрации
- 📝 `CHANGELOG.md` - История изменений

### Команда
- **Backend**: Spring Boot + PostgreSQL
- **Frontend**: Vue 3 + Vite
- **DevOps**: Docker + Docker Compose
- **AI**: n8n Workflows

---

## 🎉 Спасибо за внимание!

### Попробуйте сами:
```bash
git clone <repository>
cd Big-Data-hackathon
./start.sh
```

### Откройте:
🌐 http://localhost:5173

### Войдите как:
- 👨‍💼 Админ: `admin@bdh.kz` / `admin123`
- 👤 Житель: `resident@bdh.kz` / `user123`

---

## ❓ Вопросы?

**Готовы ответить на любые вопросы о:**
- Архитектуре и дизайне
- Технологических решениях
- Масштабировании и производительности
- Безопасности
- AI-интеграции
- Развёртывании

---

# 🚀 Спасибо!

